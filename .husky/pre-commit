#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running Pre-commit Checks..."

# 1. Lint JS/React
echo "ğŸ¨ Linting Frontend..."
npm run lint:js || { echo "âŒ Frontend Lint Failed"; exit 1; }

# 2. Lint Rust - only if Rust files are staged
if git diff --cached --name-only | grep -qE '\.(rs|toml)$'; then
  echo "ğŸ¦€ Linting Backend (Clippy)..."
  npm run lint:rs || { echo "âŒ Backend Clippy Failed"; exit 1; }
else
  echo "â­ï¸  Skipping Rust lint (no Rust files changed)"
fi

echo "âœ… All Checks Passed!"